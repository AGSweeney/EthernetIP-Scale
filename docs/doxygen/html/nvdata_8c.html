<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ESP32-P4 EtherNet/IP Device: components/opener/src/ports/nvdata/nvdata.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ESP32-P4 EtherNet/IP Device<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">EtherNet/IP adapter with IMU sensors and I/O expansion</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('nvdata_8c.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">nvdata.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This file implements common stuff to handle Non Volatile data.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="nvdata_8h_source.html">nvdata.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trace_8h_source.html">trace.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="nvqos_8h_source.html">nvqos.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="nvtcpip_8h_source.html">nvtcpip.h</a>&quot;</code><br />
</div>
<p><a href="nvdata_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a15cf85ab7ac7b425d53054200280fa91" id="r_a15cf85ab7ac7b425d53054200280fa91"><td class="memItemLeft" align="right" valign="top"><a class="el" href="typedefs_8h.html#a3dcc5f7837c120360f8cc88a76781709">EipStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a15cf85ab7ac7b425d53054200280fa91">NvdataLoad</a> (void)</td></tr>
<tr class="memdesc:a15cf85ab7ac7b425d53054200280fa91"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load NV data for all object classes.  <br /></td></tr>
<tr class="memitem:af3d3dbbe16fda24f6c1f06c62bae2174" id="r_af3d3dbbe16fda24f6c1f06c62bae2174"><td class="memItemLeft" align="right" valign="top"><a class="el" href="typedefs_8h.html#a3dcc5f7837c120360f8cc88a76781709">EipStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af3d3dbbe16fda24f6c1f06c62bae2174">NvQosSetCallback</a> (<a class="el" href="ciptypes_8h.html#a127797e9f78bd953436d3b09dcfd729e">CipInstance</a> *const instance, <a class="el" href="structCipAttributeStruct.html">CipAttributeStruct</a> *const attribute, <a class="el" href="typedefs_8h.html#aa8f68ab5a4077bda5c7bccf53ffe6f8a">CipByte</a> service)</td></tr>
<tr class="memdesc:af3d3dbbe16fda24f6c1f06c62bae2174"><td class="mdescLeft">&#160;</td><td class="mdescRight">A PostSetCallback for QoS class to store NV attributes.  <br /></td></tr>
<tr class="memitem:a546533bccf4f5e9c25f5143342d81dda" id="r_a546533bccf4f5e9c25f5143342d81dda"><td class="memItemLeft" align="right" valign="top"><a class="el" href="typedefs_8h.html#a3dcc5f7837c120360f8cc88a76781709">EipStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a546533bccf4f5e9c25f5143342d81dda">NvTcpipSetCallback</a> (<a class="el" href="ciptypes_8h.html#a127797e9f78bd953436d3b09dcfd729e">CipInstance</a> *const instance, <a class="el" href="structCipAttributeStruct.html">CipAttributeStruct</a> *const attribute, <a class="el" href="typedefs_8h.html#aa8f68ab5a4077bda5c7bccf53ffe6f8a">CipByte</a> service)</td></tr>
<tr class="memdesc:a546533bccf4f5e9c25f5143342d81dda"><td class="mdescLeft">&#160;</td><td class="mdescRight">A PostSetCallback for TCP/IP class to store NV attributes.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file implements common stuff to handle Non Volatile data. </p>
<p>This module implements <a class="el" href="#a15cf85ab7ac7b425d53054200280fa91" title="Load NV data for all object classes.">NvdataLoad()</a>, a function to load all NV data of known common objects. Also this module provides callback functions to store NV data of known objects when called by the EIP stack. </p>

<p class="definition">Definition in file <a class="el" href="nvdata_8c_source.html">nvdata.c</a>.</p>
</div><a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="a15cf85ab7ac7b425d53054200280fa91" name="a15cf85ab7ac7b425d53054200280fa91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15cf85ab7ac7b425d53054200280fa91">&#9670;&#160;</a></span>NvdataLoad()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="typedefs_8h.html#a3dcc5f7837c120360f8cc88a76781709">EipStatus</a> NvdataLoad </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load NV data for all object classes. </p>
<dl class="section return"><dt>Returns</dt><dd>kEipStatusOk on success, kEipStatusError if failure for any object occurred</dd></dl>
<p>This function loads the NV data for each object class that supports NV data from external storage. If any of the load routines fails then for that object class the current object instance values are written as new NV data. That should be the default data.</p>
<p>The load routines should be of the form int Nv&lt;ObjClassName&gt;Load(&lt;ObjectInstanceDataType&gt; *p_obj_instance); and return (-1) on failure and (0) on success. </p>

<p class="definition">Definition at line <a class="el" href="nvdata_8c_source.html#l00036">36</a> of file <a class="el" href="nvdata_8c_source.html">nvdata.c</a>.</p>

</div>
</div>
<a id="af3d3dbbe16fda24f6c1f06c62bae2174" name="af3d3dbbe16fda24f6c1f06c62bae2174"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3d3dbbe16fda24f6c1f06c62bae2174">&#9670;&#160;</a></span>NvQosSetCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="typedefs_8h.html#a3dcc5f7837c120360f8cc88a76781709">EipStatus</a> NvQosSetCallback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ciptypes_8h.html#a127797e9f78bd953436d3b09dcfd729e">CipInstance</a> *const</td>          <td class="paramname"><span class="paramname"><em>instance</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structCipAttributeStruct.html">CipAttributeStruct</a> *const</td>          <td class="paramname"><span class="paramname"><em>attribute</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="typedefs_8h.html#aa8f68ab5a4077bda5c7bccf53ffe6f8a">CipByte</a></td>          <td class="paramname"><span class="paramname"><em>service</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A PostSetCallback for QoS class to store NV attributes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>pointer to instance of QoS class </td></tr>
    <tr><td class="paramname">attribute</td><td>pointer to attribute structure </td></tr>
    <tr><td class="paramname">service</td><td>the CIP service code of current request</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>kEipStatusOk: success; kEipStatusError: failure</dd></dl>
<p>This function implements the PostSetCallback for the QoS class. The purpose of this function is to save the NV attributes of the QoS class instance to external storage.</p>
<p>This application specific implementation chose to save all attributes at once using a single <a class="el" href="nvqos_8c.html#aa15edb6c12448ed884a6fe237c400069" title="Store NV data of the QoS object to file.">NvQosStore()</a> call. </p>

<p class="definition">Definition at line <a class="el" href="nvdata_8c_source.html#l00062">62</a> of file <a class="el" href="nvdata_8c_source.html">nvdata.c</a>.</p>

</div>
</div>
<a id="a546533bccf4f5e9c25f5143342d81dda" name="a546533bccf4f5e9c25f5143342d81dda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a546533bccf4f5e9c25f5143342d81dda">&#9670;&#160;</a></span>NvTcpipSetCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="typedefs_8h.html#a3dcc5f7837c120360f8cc88a76781709">EipStatus</a> NvTcpipSetCallback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ciptypes_8h.html#a127797e9f78bd953436d3b09dcfd729e">CipInstance</a> *const</td>          <td class="paramname"><span class="paramname"><em>instance</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structCipAttributeStruct.html">CipAttributeStruct</a> *const</td>          <td class="paramname"><span class="paramname"><em>attribute</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="typedefs_8h.html#aa8f68ab5a4077bda5c7bccf53ffe6f8a">CipByte</a></td>          <td class="paramname"><span class="paramname"><em>service</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A PostSetCallback for TCP/IP class to store NV attributes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>pointer to instance of TCP/IP class </td></tr>
    <tr><td class="paramname">attribute</td><td>pointer to attribute structure </td></tr>
    <tr><td class="paramname">service</td><td>the CIP service code of current request</td></tr>
  </table>
  </dd>
</dl>
<p>This function implements the PostSetCallback for the TCP/IP class. The purpose of this function is to save the NV attributes of the TCP/IP class instance to external storage.</p>
<p>This application specific implementation chose to save all attributes at once using a single <a class="el" href="nvtcpip_8c.html#a96c1a088f49af41334a51c9f04622ca5" title="Store NV data of the TCP/IP object to NVS.">NvTcpipStore()</a> call. </p>

<p class="definition">Definition at line <a class="el" href="nvdata_8c_source.html#l00098">98</a> of file <a class="el" href="nvdata_8c_source.html">nvdata.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_409f97388efe006bc3438b95e9edef48.html">components</a></li><li class="navelem"><a href="dir_3e5983321824e3aa270636e31f7b146d.html">opener</a></li><li class="navelem"><a href="dir_81d8dde9166560fc32469eff5c6d0760.html">src</a></li><li class="navelem"><a href="dir_0e212bd6755d1e4d0850c7339a0da592.html">ports</a></li><li class="navelem"><a href="dir_bdfa78161ec4b6083c25f32616067df8.html">nvdata</a></li><li class="navelem"><a href="nvdata_8c.html">nvdata.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
